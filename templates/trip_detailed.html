{% extends "template.html" %}

{% block title %}trip detail{% endblock %}
{%- block header %}
<a href="{{ url_for('show_trips') }}" class="breadcrumb">All Trips</a>
{%- if trip['owner_id']|string() == session.get('USERNAME', None)|string() %}
<a href="{{ url_for('show_trips', show='user') }}" class="breadcrumb">My Trips</a>
{% endif -%}
<a href="#!" class="breadcrumb">Detailed Information for Trip: <strong>{{ trip['name'] }}</strong></a>
{% endblock -%}

{%- block content %}
<section class="col s12 l5">
	<h4 class="trip-detailed-header">Overview</h4>
	<div class="row overview">
		<div class="col s6">Start Date:</div>
		<div class="col s6">{{ trip['start_date'].strftime('%d %B %Y') }}</div>
		<div class="col s6">End Date:</div>
		<div class="col s6">{{ trip['end_date'].strftime('%d %B %Y') }}</div>
		<div class="col s6">Travelers:</div>
		<div class="col s6">{{ trip['travelers'] }}</div>
		<div class="col s6">Duration:</div>
		<div class="col s6">_duration_</div>
		<div class="col s6">Avg Cost (pp/night):</div>
		<div class="col s6">avg_cost</div>
		<div class="col s6">Total Stops:</div>
		<div class="col s6">no_of_stops</div>
		<div class="col s6">Total Countries:</div>
		<div class="col s6">no_of_countries</div>
	</div>

	<div class="row center">
		<div class="col s12">
			<table class="responsive-table centered highlight">
				<thead>
					<tr>
						<th>Costs</th>
						<th>Accommodation</th>
						<th>Food</th>
						<th>Other</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<th>Per Person</th>
						<td>Value 1</td>
						<td>Value 2</td>
						<td>Value 3</td>
					</tr>
					<tr>
						<th>Total</th>
						<td>Value 1</td>
						<td>Value 2</td>
						<td>Value 3</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<!-- </div> -->
</section>

<section class="trip-month col s12 l6 offset-l1">
	<h4 class="trip-detailed-header">Stops</h4>
	<div class="row">
		<div class="col s12">
			{%- if stops.count() -%}
			<ul class="collapsible">
				{%- for stop in stops -%}
				<li>
					<div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
						{{ stop['country']}} - {{ stop['city_town'] }} ({{ stop['duration'] }} nights)
						{%- if trip['owner_id']|string() == session.get('USERNAME', None)|string() -%}
						<div class="icons">
							<a href="{{url_for('trip_stop_update', trip_id=trip['_id'], stop_id=stop['_id'])}}">
								<i class="small material-icons" title="Update">edit</i>
							</a>
							<a href="{{url_for('trip_stop_duplicate', trip_id=trip['_id'], stop_id=stop['_id'])}}">
								<i class="small material-icons" title="Duplicate">content_copy</i>
							</a>
							<a href="{{url_for('trip_stop_delete', trip_id=trip['_id'], stop_id=stop['_id'])}}">
								<i class="small material-icons" title="Delete">delete</i>
							</a>
						</div>
						{%- endif -%}
					</div>
					<div class="collapsible-body">
						<div class="row">
							<div class="col s6"><strong>Start Date:</strong></div>
							<div class="col s6">_start_date_</div>
							<div class="col s6"><strong>End Date:</strong></div>
							<div class="col s6">_end_date_</div>
							<div class="col s6"><strong>Duration:</strong></div>
							<div class="col s6">{{ stop['duration'] }}</div>
							<div class="col s6"><strong>Currency:</strong></div>
							<div class="col s6">{{ stop['currency'] }}</div>
							<div class="col s12">
								<table class="highlight responsive-table">
									<thead>
										<tr>
											<th>Costs</th>
											<th>Accommodation</th>
											<th>Food</th>
											<th>Other</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<th>Total (per person/night)</th>
											<td>{{ stop['cost_accommodation'] }}</td>
											<td>{{ stop['cost_food'] }}</td>
											<td>{{ stop['cost_other'] }}</td>
										</tr>
										<tr>
											<th>Total (per person)</th>
											<td>{{ stop['cost_accommodation'] }}</td>
											<td>{{ stop['cost_food'] }}</td>
											<td>{{ stop['cost_other'] }}</td>
										</tr>
										<tr>
											<th>Total</th>
											<td>{{ stop['cost_accommodation'] }}</td>
											<td>{{ stop['cost_food'] }}</td>
											<td>{{ stop['cost_other'] }}</td>
										</tr>
									</tbody>
								</table>
							</div>

						</div>
					</div>
				</li>
				{%- endfor -%}
			</ul>

			{%- else -%}
			<h4 class="center">This Trip does not have any stops.</h4>
			{%- if trip['owner_id']|string() == session.get('USERNAME', None)|string() -%}
			<p class="center">You can add a Stop by clicking 'Add Stop' at the bottom of
				this page.</p>
			{%- endif -%}
			{%- endif -%}
		</div>
	</div>
</section>

<!-- floating link to add a new trip -->
{%- if trip['owner_id']|string() == session.get('USERNAME', None)|string() -%}
<aside class="fixed-action-btn">
	<a href="{{ url_for('trip_update', trip_id=trip['_id']) }}" class="btn-small my-btn-update">
		update
	</a>
	<a href="{{ url_for('trip_delete', trip_id=trip['_id']) }}" class="btn-small my-btn-delete">
		delete
	</a>
	<a href="{{ url_for('trip_stop_new', trip_id=trip['_id']) }}" class="btn-small my-btn-new">
		add stop
	</a>
</aside>
{%- endif -%}
{%- endblock -%}

{%- block js -%}
<script>
	$('.collapsible').collapsible();
</script>
{%- endblock -%}