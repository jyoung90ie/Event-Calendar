{% extends "template.html" %}

{% block title %}{{'update' if action == 'update' else 'create new'}} trip{% endblock %}

{%- block header -%}
<a href="{{ url_for('show_trips') }}" class="breadcrumb">All Trips</a>
{%- if action == 'update' %}
<a href="{{ url_for('show_trips') }}" class="breadcrumb">My Trips</a>
<a href="{{ url_for('trip_detailed', trip_id=trip['_id']) }}" class="breadcrumb">Trip:
	{{ trip['name'] }}</a>
<a href="#!" class="breadcrumb">Update</a>
{%- else %}
<a href="#!" class="breadcrumb">New Trip</a>
{%- endif -%}
{%- endblock -%}

{%- block content -%}
<section>
	<p class="page-description">
		{%- if action == 'update' -%}
		update your trip
		{%- else -%}
		create a new trip - once created you can add as many stops as your heart desires
		{%- endif -%}
	</p>
	<div class="row">
		<div class="col s12">
			<form action="" method="POST">
				<div class="row">
					<div class="input-field col s12">
						<input id="trip-name" name="trip-name" type="text" class="validate"
                            value="{{ trip['name'] if action == 'update' else '' }}" required>
						<label for="trip-name">Name</label>
						<span class="helper-text" data-error="Field must be populated"></span>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<input id="start-date" name="start-date" type="text" class="datepicker readonly"
                            value="{{ trip['start_date'].strftime('%d %b %Y') if action == 'update' else '' }}" required>
						<label for="start-date">Start Date</label>
						<span class="helper-text" data-error="Field required"></span>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<input id="end-date" name="end-date" type="text" class="datepicker readonly"
                            value="{{ trip['end_date'].strftime('%d %b %Y') if action == 'update' else '' }}" required>
						<label for="end-date">End Date</label>
						<span class="helper-text" data-error="Field required"></span>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<label>
                            <input id="public" name="public" type="checkbox" class="filled-in"
                            {%- if action == 'update' -%} 
                                {{ ' checked="checked"' if trip['public'] == True else '' }} 
                            {%- else -%}
                                checked="checked"
                            {%- endif -%}>
                            <span>Display Trip to Public?</span>
                        </label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<button class="btn waves-effect waves-light" type="submit" name="action">{{'Update' if action == 'update' else 'Create'}}
                    <i class="material-icons right">{{'update' if action == 'update' else 'create'}}</i>
                </button>
					</div>
				</div>
			</form>
		</div>
	</div>
</section>
{%- endblock -%}